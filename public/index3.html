<!DOCTYPE html>
<html>
  <head>
    <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/viewer3D.min.js"></script>
  </head>
  <body>
    <div id="forgeViewer" style="width: 100%; height: 100%"></div>
    <script>
      var options = {
        env: "AutodeskProduction",
        getAccessToken: function (onGetAccessToken) {
          onGetAccessToken(window.accessToken, 3600); // Use window-scoped token variable
        },
      };

      Autodesk.Viewing.Initializer(options, function () {
        var viewerDiv = document.getElementById("forgeViewer");
        var viewer = new Autodesk.Viewing.Private.GuiViewer3D(viewerDiv);
        Autodesk.Viewing.Document.load(
          "urn:" + window.modelUrn, // Use window-scoped URN variable
          (doc) => {
            var viewables = doc.getRoot().getDefaultGeometry();
            viewer.start();
            viewer.loadDocumentNode(doc, viewables);
          },
          (errorMsg) => console.error(errorMsg)
        );
      });
    </script>
  </body>
</html>
